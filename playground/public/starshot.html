<!doctype html>
<html lang="en" class="h-dvh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Try Starshot Prototype</title>
    <link href="styles.css" rel="stylesheet">
</head>
<body class="bg-drupal-blue h-dvh">
<trial-manager></trial-manager>
<script src="/trial-manager.mjs"></script>
<script type="module">
    import { registerWorker } from './drupal-cgi-worker.mjs'
    import {attachTrialManager, createInstallWorker} from "./utils.mjs";
    const sendMessage = registerWorker(`${window.location.origin}/service-worker.mjs`)
    const flavor = 'starshot';
    const artifact = 'drupal-starshot.zip'

    const worker = createInstallWorker(sendMessage, {
        flavor,
        artifact,
        installParameters: {
            skip: true,
            siteName: 'Try Starshot (prototype)',
            profile: 'starshot_installer',
            recipes: ['starshot', 'starshot_multilingual'],
            langcode: 'en',
        }
    })
    document.addEventListener('DOMContentLoaded', async () => {
        const trialManager = document.querySelector('trial-manager');
        attachTrialManager(trialManager, worker, flavor, artifact)
    });
</script>
</body>
</html>
